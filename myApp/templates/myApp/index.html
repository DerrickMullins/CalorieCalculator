<!DOCTYPE html>
<html lang="en">
  <!--head-->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>index.html</title>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  </head>

  <!--body-->
  <body>

    <!--Navigation Bar-->
    <div class="container">
      <div class="col-md-12">
        <nav class="navbar navbar-dark bg-dark">
          <img src="images/pApple.jpg" width="100" height="50" alt="" />
          <a class="navbar-brand" href="#">Calorie Calculator</a>
        </nav>
      </div>

      <br />
      <br />

      <!--What did you eat dropdown-->
      <div style="text-align:center" class="row">
        <div class="col-md-12">
          <form method="POST" class="form-inline">
          <!--label-->
          <label class="col-md-2">
            <b>What did you eat today?</b>
          </label>
          <!--Select tag = dropdown box-->
          <select
            class="col-md-6 form-control"
            name="food_consumed"
            id="food_consumed"
          >
            <option selected>Select</option>
          </select> 
          <!--addition button = add food-->
          <button type="submit" class="btn btn-primary my-1">+</button>
        </div>
      </div>
      </form>

      <br>
      <br>

      <!--Nutrition table for food added-->
      <div class="row">
        <div class="col-md-6"> 
          <div> <h3> <b> Nutritional Value </b></h3></div>
          <table id="myTable"class="table table-dark">
            <!--Table Heading row-->
            <tr>
              <th style="text-align:center">Name</th>
              <th style="text-align:center">Carbs</th>
              <th style="text-align:center">Protein</th>
              <th style="text-align:center">Fats</th>
              <th style="text-align:center">Delete</th>
            </tr>

            {% for f in consumed_food %}

            <!--food item data row-->
            <tr>
              <td style="text-align: center">
              {{f.food_consumed.name}}</td>
              <td style="text-align: center">
              {{f.food_consumed.carbs}}</td>
              <td style="text-align: center">
              {{f.food_consumed.protein}}</td>
              <td style="text-align: center">
              {{f.food_consumed.fats}}</td>
              <td style="text-align: center">
              {{f.food_consumed.calories}}</td>
              <!--Delete Button-->
              <td style="text-align: center"><a class="btn
                btn-danger" href="{% url 'delete' f.pk %}">X</a>
              </td>  
            </tr>

            {% endfor %}
            
            <!--Totals row-->
            <tr class="bg-dark text-white">
              <td style="text-align:center" id="name"><b>Total</b></td>
              <td style="text-align:center" id="totalCarbs"><b></b></td>
              <td style="text-align:center" id="totalProtien"><b></b></td>
              <td style="text-align:center" id="totalFats"><b></b></td>
              <td style="text-align:center" id="totalCalories"><b></b></td>
            </tr>

          </table>
        </div>
      </div>
      
      <!--Canvas-->
      <div class="col-md-8"> 
        <canvas id="myChart" width="400" height="400"></canvas>
      </div>

      <!--Javascript to create chart-->
      <script>
        var xValues = ["carbs","protein","fats","calories"];
        var yValues = [75, 15, 25, 350];
        var barColors = [
          "#b91d47",
          "#00aba9",
          "#2b5797",
          "#DAA520",
          
        ]
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: xValues,
                datasets: [{
                    data: yValues,
                    backgroundColor: barColors,
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
              title:{
                display: true,
                text: "Daily Breakdown"
              }
            }
        });
      </script>

    </div>
  </body>
</html>